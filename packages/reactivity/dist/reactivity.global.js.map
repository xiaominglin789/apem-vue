{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/enum.ts","../src/effect.ts","../src/base-handler.ts","../src/reactive.ts"],"sourcesContent":["/** 共享模块-通用方法集合 */\n\n/**\n * 判断 是否为对象类型\n * @param target \n * @returns true: 是对象类型,  false: 非对象类型\n */\nfunction isObject(target: any): boolean {\n  return typeof target == \"object\" && target !== null;\n}\n\n/**\n * 判断 是不是数组类型\n * @param target \n * @returns true: 数组类型,  false: 非数组类型\n */\nfunction isArray(target: any): boolean {\n  return Array.isArray(target);\n}\n\n/**\n * 判断 是不是函数类型\n * @param target \n * @returns true: 函数类型,  false: 非函数类型\n */\nfunction isFunction(target: any): boolean {\n  return typeof target == \"function\";\n}\n\n/**\n * 判断 是不是数字类型\n * @param target \n * @returns true: 数字类型,  false: 非数字类型\n */\n function isNumber(target: any): boolean {\n  return typeof target == \"number\";\n}\n\n/**\n * 判断 是不是字符串类型\n * @param target \n * @returns true: 字符串类型,  false: 非字符串类型\n */\n function isString(target: any): boolean {\n  return typeof target == \"string\";\n}\n\n/**\n * 判断 是不是整形数字类型\n * @param target \n * @returns true: 整形数字类型,  false: 非 整形数字类型\n */\nfunction isInteger(target: any): boolean {\n  return parseInt(target) + \"\" === target;\n}\n\n/**\n * target 是否有 key 这个属性\n * @param target \n * @param key key键的属性\n * @returns \n */\nfunction hasOwnKey(target, key) {\n  return Object.prototype.hasOwnProperty.call(target, key);\n}\n\n/**\n * 2值比较是否相等\n * @param valA \n * @param valB \n * @returns true: 值一样的， false: 值不一样\n */\nfunction  compareValue(valA, valB) {\n  if (!valA || !valB) {\n    return false;\n  }\n\n  return valB === valA;\n}\n\nexport {\n  isObject,\n  isArray,\n  isFunction,\n  isNumber,\n  isString,\n  isInteger,\n  hasOwnKey,\n  compareValue\n};\n","/** 依赖收集的操作标识枚举 */\nexport enum TrackOpsEnum {\n  /** 取值 */\n  GET,\n}\n\n/** 触发标记枚举 */\nexport enum TriggerOpsEnum {\n  /** 添加 */\n  ADD,\n  /** 修改 */\n  SET\n}\n","import { isArray } from \"@vue/shared/src\";\nimport { TrackOpsEnum, TriggerOpsEnum } from \"./enum\";\n\n/** 配置项参数定义 */\ninterface IEffectOptions {\n  /** 是否为懒加载 */\n  lazy: boolean\n}\n\n/** effect序号标识 */\nlet effectID = 0;\n/** 当前的effect */\nlet activeEffect = null;\n/** effect存储栈 */\nconst effectStack = [];\n/**\n * 对象-属性-effects 依赖映射表\n * 结构:-WeakMap(-Map(-Set))\n * {\n *    target: {\n *      key: Set(effect1, effect2)\n *    }\n * }\n */\nconst targetEffectMap = new WeakMap();\n\n/**\n * 副作用\n * 作用: 可响应的effect, 数据变化时重新执行\n * @param fn 函数\n * @param options 配置对象:key-value\n */\nfunction effect(fn: Function, options: IEffectOptions = { lazy: false }) {\n  const effect = createReactiveEffect(fn, options);\n\n  if (!options.lazy) {\n    // 默认先执行一次\n    effect();\n  }\n\n  return effect;\n}\n\n/** 创建可响应的efflect函数 - 闭包 */\nfunction createReactiveEffect(fn: Function, options: IEffectOptions = { lazy: false }) {\n  const effect = function reactiveEffect() {\n    // 函数执行, 会取值, 会执行reactive的get方法作依赖收集\n    if (!effectStack.includes(effect)) {\n      try {\n        // console.log(\"准备执行effect内的函数\");\n        effectStack.push(effect);\n        activeEffect = effect;\n        return fn();\n      } finally {\n        // 遇到嵌套effect函数时，保证 activeEffect 正确指向\n        effectStack.pop();\n        activeEffect = effectStack[effectStack.length - 1];\n      }\n    }\n  }\n\n  // 当前effect的id标识\n  effect.id = effectID++;\n  // 标记为 响应式的effect\n  effect._isEffect = true;\n  // effect-对应的原函数\n  effect.raw = fn;\n  // effect-属性配置\n  effect.options = options;\n\n  return effect;\n}\n\n/**\n * 收集器 依赖收集函数\n * 让 某个对象的属性,收集其当前对应的effect函数。\n * @param target 目标对象\n * @param trackOpType 操作标识\n * @param key 对象的属性\n */\nfunction track(target: any, trackOpType: TrackOpsEnum, key: string) {\n  // console.log(\"收集到依赖 \", target, \" \", key);\n  // console.log(target, key, activeEffect);\n  if (null === activeEffect) {\n    return;\n  }\n\n  let depsMap = targetEffectMap.get(target);\n  if (!depsMap) {\n    // 空map,初始化taget键\n    targetEffectMap.set(target, (depsMap = new Map))\n  }\n\n  let dep = depsMap.get(key);\n  if (!dep) {\n    // 空vulue-map,初始化set\n    depsMap.set(key, (dep = new Set));\n  }\n\n  // set去重effect\n  if (!dep.has(activeEffect)) {\n    dep.add(activeEffect);\n  }\n}\n\n/**\n * 触发器 effect->通知->视图更新\n * @param target 目标对象\n * @param TriggerOpsEnum 触发的类型:SET / ADD\n * @param key 哪个键\n * @param newValue 新值\n * @param oldValue 旧值\n */\nfunction trigger(target: any, triggerOpsEnum: TriggerOpsEnum, key?: string, newValue?: any, oldValue?: any) {\n  console.error(target, triggerOpsEnum, key, newValue, oldValue);\n\n  // 取出-当前目标对应的effects\n  const depsMap = targetEffectMap.get(target);\n  if (!depsMap) {\n    // 该对象无依赖, 后续不操作\n    return;\n  }\n\n  // 缓存要操作的effects, 最终一起执行。\n  const effects = new Set();\n  const add = (effs) => {\n    if (effs) {\n      effs.forEach(eff => effects.add(eff));\n    }\n  }\n\n  // 当前依赖\n  console.log(depsMap);\n  \n  // 查看是否修改的是数组的长度, 特殊处理:\n  if (key === \"length\"  && isArray(target)) {\n    console.log(\"aaaaaaaaaaa\");\n    // 数组\n    // 如果对应的长度, 有依赖收集 则需要更新\n    depsMap.forEach((dep, key) => {\n      console.log(\"key \", key, \" newValue \", newValue);\n      if (key===\"length\" || key > newValue) {\n        add(dep);\n        console.log(dep);\n      }\n    });\n  } else {\n    // 非数组\n    console.log(\"bbbbbbbbbb\");\n  }\n  \n  console.log(\"effects \", effects);\n\n  // 执行effects内的每一个函数\n  effects.forEach((ef:Function) => {\n    console.log(ef);\n    ef();\n  });\n}\n\nexport {\n  effect,\n  track,\n  trigger\n}\n","import { compareValue, hasOwnKey, isArray, isInteger, isObject } from \"@vue/shared\";\nimport { readonly, reactive } from \"./reactive\";\nimport { TrackOpsEnum, TriggerOpsEnum } from \"./enum\";\nimport { track, trigger } from \"./effect\";\n\n/**\n * getter读取\n * @param isReadonly 是否为仅读, true: readonly仅读, false: 响应式proxy\n * @param isShollaw 是否为仅作用于第一层, true: 仅作用于第一层， false: 全部嵌套属性都仅读或响应式\n * @returns \n */\nfunction createGetter(isReadonly=false, isShollaw=false) {\n  return function get(target: any, key: string, receiver: any) {\n    const result = Reflect.get(target, key, receiver);\n\n    // console.log('get key = ', key);\n\n    if (!isReadonly) {\n      // 只读的对象不做依赖收集\n      // 响应式对象-才作依赖收集\n      // 取值时, 去 执行 tract 收集 effect\n      // v3 effect =取代了=>  v2 watcher\n      // console.log(\"执行effect时会取值， 需要收集effect: \", key);\n\n      track(target, TrackOpsEnum.GET, key);\n    }\n\n    if (isShollaw) {\n      // 只有第一层是响应式属性\n      return result;\n    } \n    \n    if (isObject(result)) {\n      // 当取值时才进行代理\n      // 判断对象类型，只读属性，递归包装\n      return isReadonly ? readonly(result) : reactive(result);\n    }\n    \n    return result;\n  }\n}\n\n/**\n * setter写入(只有响应式数据才能修改)\n * @param isShollaw 是否为仅作用于第一层, true: 仅作用于第一层， false: 全部嵌套属性都响应式\n * 注意点:\n * 1.target push / pop 等修改了数组长度的操作 都会触发2次set. \n *    因为第一次是下标索引值的改变,\n *    第二次是length属性的改变, 但是 。\n * 2.如果是外部直接修改数组的length属性, 执行 trigger\n */\nfunction createSetter(isShollaw=false) {\n  return function set(target: any, key: string, newValue: any, receiver: any) {\n    const oldValue = target[key];\n\n    // 是不是数组, 判断key(下标)是不是比原数组长度小:  小-> set 修改操作, 大 添加新元素的操作\n    //   不是数值型数组, 则为 对象类型。判断 key是不是对象商的属性。是 -> 修改操作， 否 添加新属性的操作。\n    let hasKey = (isArray(target) && isInteger(key)) ? \n                  (Number(key) < target.length) : hasOwnKey(target, key);\n    \n    // 反射\n    // const result = Reflect.set(target, key, newValue, receiver);\n    \n    console.log(\"oldValue = \", oldValue, \" newValue = \", newValue);\n    \n    if (!hasKey) {\n      // 添加操作\n      // 通知effect trigger操作\n      trigger(target, TriggerOpsEnum.ADD, key, newValue);\n      \n    } else if (!compareValue(oldValue, newValue)) {\n      // 值不同,才去改。值一样,不修改\n      // 通知effect trigger操作\n      trigger(target, TriggerOpsEnum.SET, key, newValue, oldValue);\n    }\n\n    const result = Reflect.set(target, key, newValue, receiver);\n    // 返回修改的结果 true/false\n    return result;\n  }\n}\n\n\n/** 响应式对象-get */\nconst get = createGetter(false, false);\n/** 仅第一层响应式对象-get */\nconst shollawReactiveGetter = createGetter(false, true);\n/** 全部属性仅读对象-get */\nconst readonlyGetter = createGetter(true, false);\n/** 仅第一层只读对象-get */\nconst shollawReadonlyGetter = createGetter(true, true);\n/** 响应式对象-set */\nconst set = createSetter(false);\n/** 仅第一层响应式对象-set */\nconst shollawReactiveSetter = createSetter(true);\n\n\n/** reactive包装-get/set处理 */\nconst handleReactive = {\n  get,\n  set,\n}\n\n/** shallowReactive包装-get/set处理 */\nconst handleShollawReactive = {\n  get: shollawReactiveGetter,\n  set: shollawReactiveSetter\n}\n\n/** readonly包装-get/set处理 */\nconst handleReadonly = {\n  get: readonlyGetter,\n  set: (target: any, key: string) => {\n    console.warn(target, \" 所有属性都是只读, 无法修改\");\n    return false;\n  }\n}\n\n/** shallowReadonly包装-get/set处理 */\nconst handleShollawReadonly = {\n  get: shollawReadonlyGetter,\n  set: (target: any, key: string) => {\n    console.warn(target, \" 的属性:\", key, \" 属性是只读的, 无法修改\");\n    return false;\n  }\n}\n\nexport {\n  handleReactive,\n  handleShollawReactive,\n  handleReadonly,\n  handleShollawReadonly,\n}\n","import { isObject } from \"@vue/shared/src\";\nimport {\n  handleReactive,\n  handleShollawReactive,\n  handleReadonly,\n  handleShollawReadonly,\n} from \"./base-handler\";\n\n/** 响应式数据-代理对象map */\nconst reactiveProxyMap = new WeakMap();\n/** 只读数据-代理对象map */\nconst readonlyProxyMap = new WeakMap();\n\n/**\n * 根据配置创建代理对象\n * @param target 数据源\n * @param isReadonly 是否仅读\n * @param handle get/set-处理配置项\n */\nfunction createReactiveObject(target: any, isReadonly: boolean, handle: ProxyHandler<any>) {\n  /**\n   * 1.数据源是不是对象类型, 非对象的数据源直接返回\n   * 2.数据源是否已被代理过了,有代理则直接返回代理的数据\n   *   - 数据源是不是只读的, 取到对应的数据缓存\n   *   - 没有缓存,则存入缓存中、\n   */\n  if (!isObject(target)) {\n    return target;\n  }\n\n  const proxyMap = isReadonly ? readonlyProxyMap : reactiveProxyMap;\n\n  if (proxyMap.has(target)) {\n    // 有缓存, 返回缓存\n    return proxyMap.get(target);\n  }\n\n  // 无缓存, 新建, 先存缓存\n  const targetProxy = new Proxy(target, handle);\n  proxyMap.set(target, targetProxy);\n\n  return targetProxy;\n}\n\n\n/** reactive包装: 所有深度的属性都被包装成proxy */\nfunction reactive(data: any) {\n  return createReactiveObject(data, false, handleReactive);\n}\n\n/** shallowReactive包装: 只有第一层属性会被包装成proxy,其他层不会 */\nfunction shallowReactive(data: any) {\n  return createReactiveObject(data, false, handleShollawReactive);\n}\n\n/** readonly包装: 所有属性都是只读,不能改 */\nfunction readonly(data: any) {\n  return createReactiveObject(data, true, handleReadonly);\n}\n\n/**\n * shallowReadonly包装: 只有第一层属性是只读的,其他层的可读可改\n */\nfunction shallowReadonly(data: any) {\n  return createReactiveObject(data, true, handleShollawReadonly);\n}\n\nexport {\n  reactive,\n  shallowReactive,\n  readonly,\n  shallowReadonly\n};\n"],"names":[],"mappings":"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"}